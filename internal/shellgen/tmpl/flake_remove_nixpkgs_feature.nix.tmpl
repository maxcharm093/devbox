{
  description = "A devbox shell";

  inputs = {
    {{/* nixpkgs could be removed once we turn php/haskell planners into flakes */ -}}
    nixpkgs.url = "{{ .NixpkgsInfo.URL }}";
  };

  outputs = {
    self,
    nixpkgs,
  }:
      let
         pkgs = nixpkgs.legacyPackages.{{ .System }};
         {{- range $_, $pkg := .Packages }}
         {{ $pkg.Name }}.{{ $.System }} = builtins.fetchClosure{
            fromStore = "{{ $pkg.FetchClosureArgs.FromStore }}";
            fromPath = "{{ $pkg.FetchClosureArgs.FromPath }}";
         };
         {{- end }}
      in
      {
        {{/* TODO savil: generalize by system */}}
        devShells.{{ .System }}.default = pkgs.mkShell {
          buildInputs = [
            {{- range $_, $pkg := .Packages }}
            {{ $pkg.Name }}.{{ $.System }}
            {{- end }}
          ];
        };
      };
}
